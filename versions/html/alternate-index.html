<!DOCTYPE html>
<html style="background-image: url('./Resources/images/dark_train.jpg');
background-size: cover; background-blend-mode: lighten;">


    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Document</title>
        <link href="./resources/css/index.css" type="text/css" rel="stylesheet">
        <title>Project 3</title>

        <script src="https://cdn.jsdelivr.net/npm/web3@1.7.0/lib/index.min.js"></script>

    </head>
    <body>
        <!--Header-->
        <h1 class="header">Devil's Train</h1>
        <h2 class="under">Will you get lucky? Or will you get rolled?</h2>

        <!--Game Explanation-->
        <p>Are you game?<br>
        It is simple really...<br> take a risk, if you dare...<br>
        All you have to do is buy a ticket... <br>the rest is <em>EASY PEASY</em></p>
        <p class="smile"><img id="smile" src="Resources/images/smile.jpg"></p>
        <p>Once you buy your ticket wait for the train to fill<br>
        When all the riders are on board a signal is sent and <em>away we go</em><br>
        Patience is a virtue and by the time the train is back at the station<br>
            you will know if the Devil's Luck was on your side...
        </p>
        <div class="container">
            <div class="center">
                <button id="pleasework" class="button" type="button">Take a Chance</button>
            </div>
        </div>


        // below is the attempt to run web3 as a script from html
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>

        <script id="pleasework">

            if (typeof web3 !== 'undefined') {
                web3 = new Web3(web3.currentProvider);
            } else {
                // set the provider you want from Web3.providers
                web3 = new Web3(new Web3.providers.HttpProvider("https://rinkeby.infura.io/v3/467ba6fedd7b4669b0bafbbcf80ab595"));
            }

            web3.eth.defaultAccount = web3.eth.accounts[0];
            var DevilTrainContract = web3.eth.contract([
                    {
                        "inputs": [
                            {
                                "internalType": "address",
                            "name": "newOwner",
                            "type": "address"
                        }
                    ],
                    "stateMutability": "nonpayable",
                    "type": "constructor"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {
                            "indexed": true,
                            "internalType": "address",
                            "name": "from",
                            "type": "address"
                        },
                        {
                            "indexed": true,
                            "internalType": "address",
                            "name": "to",
                            "type": "address"
                        }
                    ],
                    "name": "OwnershipTransferRequested",
                    "type": "event"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {
                            "indexed": true,
                            "internalType": "address",
                            "name": "from",
                            "type": "address"
                        },
                        {
                            "indexed": true,
                            "internalType": "address",
                            "name": "to",
                            "type": "address"
                        }
                    ],
                    "name": "OwnershipTransferred",
                    "type": "event"
                },
                {
                    "inputs": [],
                    "name": "acceptOwnership",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "owner",
                    "outputs": [
                        {
                            "internalType": "address",
                            "name": "",
                            "type": "address"
                        }
                    ],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [
                        {
                            "internalType": "address",
                            "name": "to",
                            "type": "address"
                        }
                    ],
                    "name": "transferOwnership",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                }
            ]);

            var DevilTrain = DevilTrainContract.at('0x7c74fa5e63b9599550131fc921c1f27482604236');
            //console.log(Coursetro);

            $("#button").click(function() {
                DevilTrain.buyTicket.sendAsync({from: web3.eth.defaultAccount, value: 200000000000000000});
            });

        </script>

    </body>
</html>
